<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Hayatta Kal</title>
<style>
body{background:#111;color:#eee;font-family:Arial;text-align:center}
button{padding:6px 14px;margin:4px;cursor:pointer}
.panel{border:1px solid #444;padding:12px;margin:10px auto;max-width:760px;text-align:left}
.story{font-style:italic;color:#ccc;min-height:90px}
#game,#end{display:none}
.choice button{display:block;margin:6px 0}
</style>
</head>
<body>

<div id="menu">
  <h1>ğŸ•¯ Hayatta Kal</h1>
  <p>SoÄŸukâ€¦ ve hatÄ±rlamadÄ±ÄŸÄ±n bir yer.</p>
  <button onclick="baslat()">â–¶ BaÅŸla</button>
</div>

<div id="game">
  <div class="panel" id="stats"></div>
  <div class="panel story" id="story"></div>
  <div class="panel" id="status"></div>
  <div class="panel" id="log"></div>
  <div class="panel choice" id="choices"></div>

  <div class="panel">
    <button onclick="kesif()">KeÅŸif</button>
    <button onclick="dinlen()">Dinlen</button>
    <button onclick="gunuBitir()">GÃ¼nÃ¼ Bitir</button>
    <button onclick="hikayeIlerle()">Ä°lerle â–¶</button>
  </div>
</div>

<div id="end">
  <h2 id="endTitle"></h2>
  <div class="panel" id="summary"></div>
  <button onclick="location.reload()">Yeniden BaÅŸla</button>
</div>

<script>
// =====================
// OYUN DEÄÄ°ÅKENLERÄ°
// =====================
let gun,can,enerji,odak;
let kesifSay=0,dinlenSay=0,toplamHasar=0;
let kaliciTehdit=false,evcilHayvan=false;

let profil={
  kesifci:0,
  temkinli:0,
  hayattaKalan:0
};

let aktifHikaye=[],hikayeIndex=0;

// =====================
// SABÄ°T HÄ°KÃ‚YE GÃœNLERÄ°
// =====================
const SABIT_HIKAYE={
1:["UyandÄ±ÄŸÄ±nda buraya nasÄ±l geldiÄŸini bilmiyorsun."],
4:["Orman seni izliyormuÅŸ gibi hissettiriyor."],
8:["Burada senden Ã¶nce baÅŸkalarÄ± vardÄ±."],
13:["Geri dÃ¶nmek diye bir ÅŸey kalmadÄ±."],
18:["BurasÄ± artÄ±k seni tanÄ±yor."],
22:["Sonuna yaklaÅŸÄ±yorsun."]
};

// =====================
// BAÅLAT
// =====================
function baslat(){
  menu.style.display="none";
  game.style.display="block";
  gun=1;can=100;enerji=100;odak=5;
  hikayeHazirla();
  guncelle();
}

// =====================
// EKRAN GÃœNCELLEME
// =====================
function guncelle(){
  stats.innerHTML=`<b>GÃ¼n:</b> ${gun} | â¤ï¸ ${can} âš¡ ${enerji} ğŸ¯ ${odak}`;
  let d=[];
  if(can<40)d.push("YaralÄ±");
  if(enerji<30)d.push("TÃ¼kenmiÅŸ");
  if(odak<=0)d.push("Zihni DaÄŸÄ±nÄ±k");
  status.innerHTML="<b>Durum:</b> "+(d.length?d.join(", "):"Normal");
}

// =====================
// OYUNCUYA Ã–ZEL HÄ°KÃ‚YE
// =====================
function profilMetni(){
  if(profil.kesifci > profil.temkinli+2)
    return "Durmak sana gÃ¶re deÄŸil. BilmediÄŸin ÅŸeylere doÄŸru yÃ¼rÃ¼yorsun.";
  if(profil.temkinli > profil.kesifci+2)
    return "Beklemeyi Ã¶ÄŸrendin. SabÄ±r seni hayatta tutuyor.";
  return "Ne ileri ne geri. Sadece ayakta kalmaya Ã§alÄ±ÅŸÄ±yorsun.";
}

// =====================
// HÄ°KÃ‚YE HAZIRLA
// =====================
function hikayeHazirla(){
  aktifHikaye=[];
  aktifHikaye.push(profilMetni());

  if(SABIT_HIKAYE[gun])
    aktifHikaye.push(...SABIT_HIKAYE[gun]);

  if(can<40)aktifHikaye.push("VÃ¼cudun senden Ã¶nce pes ediyor.");
  if(enerji<30)aktifHikaye.push("Her adÄ±m daha aÄŸÄ±r.");
  if(kaliciTehdit)aktifHikaye.push("Bir ÅŸey seni izliyor.");
  if(evcilHayvan)aktifHikaye.push("YanÄ±nda yalnÄ±z deÄŸilsin.");

  hikayeIndex=0;
  story.innerHTML=aktifHikaye[0]||"";
}

// =====================
// HÄ°KÃ‚YE Ä°LERLE
// =====================
function hikayeIlerle(){
  if(hikayeIndex<aktifHikaye.length-1){
    hikayeIndex++;
    story.innerHTML=aktifHikaye[hikayeIndex];
  }
}

// =====================
// KEÅÄ°F
// =====================
function kesif(){
  if(odak<=0){log.innerHTML="Odak yok.";return;}
  kesifSay++; profil.kesifci++;
  odak--; enerji-=10;
  Math.random()<0.6 ? olay() : log.innerHTML="Sessiz bir keÅŸif.";
  kontrol(); guncelle();
}

// =====================
// OLAYLAR
// =====================
function olay(){
  Math.random()<0.5 ? hayvanOlay() : evcilOlay();
}

function hayvanOlay(){
  choices.innerHTML=`
  <b>Bir hayvan aniden saldÄ±rÄ±yor</b>
  <button onclick="hayvanSec('kac')">KaÃ§</button>
  <button onclick="hayvanSec('savun')">Savun</button>`;
}

function hayvanSec(secim){
  choices.innerHTML="";
  if(secim==="kac"){
    enerji-=12;
    log.innerHTML="KaÃ§mayÄ± baÅŸardÄ±n ama yÄ±prandÄ±n.";
  }
  if(secim==="savun"){
    can-=15; toplamHasar+=15;
    kaliciTehdit=true;
    aktifHikaye.push("Bu orman ÅŸiddeti unutmuyor.");
  }
  kontrol(); guncelle();
}

function evcilOlay(){
  evcilHayvan=true;
  log.innerHTML="YaralÄ± bir hayvan sana yaklaÅŸÄ±yor. ArtÄ±k yalnÄ±z deÄŸilsin.";
}

// =====================
// DÄ°NLEN
// =====================
function dinlen(){
  dinlenSay++; profil.temkinli++;
  enerji+=20; can+=6;
  log.innerHTML="Dinlendin.";
  kontrol(); guncelle();
}

// =====================
// GÃœN BÄ°TÄ°R
// =====================
function gunuBitir(){
  enerji-=8;
  if(kaliciTehdit){can--;toplamHasar++;}
  if(evcilHayvan)enerji+=2;
  profil.hayattaKalan++;
  gun++;
  hikayeHazirla();
  kontrol(); guncelle();
}

// =====================
// SON KONTROL
// =====================
function kontrol(){
  if(can<=0)bitir("AvlandÄ±n","Bu orman seni kabul etmedi.");
  if(enerji<=0)bitir("TÃ¼keniÅŸ","AyaÄŸa kalkacak gÃ¼cÃ¼n kalmadÄ±.");
  if(gun>=25)sonBelirle();
}

// =====================
// SONLAR
// =====================
function sonBelirle(){
  let baslik="Hayatta Kalan";
  let metin="YaÅŸadÄ±n ama izleri seninle.";

  if(evcilHayvan && !kaliciTehdit){
    baslik="Uyum";
    metin="Bu yerle baÄŸ kurdun.";
  }
  if(profil.kesifci>profil.temkinli){
    baslik="KaÅŸif";
    metin="Risk aldÄ±n, bedelini Ã¶dedin.";
  }
  if(kaliciTehdit && toplamHasar>40){
    baslik="KaranlÄ±k Son";
    metin="PeÅŸindeler. KaÃ§Ä±ÅŸ yok.";
  }

  bitir(baslik,metin);
}

// =====================
// OYUN BÄ°TÄ°R
// =====================
function bitir(baslik,metin){
  game.style.display="none";
  end.style.display="block";
  endTitle.innerText=baslik;
  summary.innerHTML=`
  ${metin}<br><br>
  GÃ¼n: ${gun}<br>
  KeÅŸif: ${kesifSay}<br>
  Dinlenme: ${dinlenSay}<br>
  Toplam Hasar: ${toplamHasar}
  `;
}
</script>
</body>
</html>
