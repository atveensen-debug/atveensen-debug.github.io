<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Arda â€“ Son Ã‡ocuk</title>

<style>
body{
  background:#111;
  color:#eee;
  font-family:Arial;
  margin:0;
  text-align:center;
}
button{
  margin:4px;
  padding:6px 12px;
  cursor:pointer;
}
.screen{display:none;padding:20px}
#menu{display:block;min-height:100vh}
.box{
  border:1px solid #444;
  padding:10px;
  margin:10px 0;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="screen">
  <h1>ğŸ•¯ï¸ Arda â€“ Son Ã‡ocuk</h1>
  <button onclick="oyunaBasla()">â–¶ Oyuna BaÅŸla</button><br>
  <button onclick="nasilOynanir()">ğŸ“– NasÄ±l OynanÄ±r</button><br>
  <button onclick="ayarlar()">âš™ Ayarlar</button>
</div>

<!-- HOW TO -->
<div id="howto" class="screen">
  <h2>NasÄ±l OynanÄ±r</h2>
  <p>
    GÃ¼ndÃ¼z yeteneklerini geliÅŸtir.<br>
    Gece olaylarla yÃ¼zleÅŸ.<br>
    AmaÃ§: mÃ¼mkÃ¼n olduÄŸunca Ã§ok gÃ¼n hayatta kalmak.
  </p>
  <button onclick="anaMenu()">â¬… Geri</button>
</div>

<!-- SETTINGS -->
<div id="settings" class="screen">
  <h2>Ayarlar</h2>
  <button onclick="ayarZorluk('kolay')">Kolay</button>
  <button onclick="ayarZorluk('normal')">Normal</button>
  <button onclick="ayarZorluk('zor')">Zor</button>
  <p>Zorluk: <b id="zorlukYazi">Normal</b></p>
  <button onclick="anaMenu()">â¬… MenÃ¼</button>
</div>

<!-- GAME -->
<div id="game" class="screen">

<h2>ğŸ•¯ï¸ Arda</h2>

<div class="box">
  GÃ¼n: <span id="gun"></span><br>
  Tehdit: <b><span id="tehdit"></span></b><br>
  â¤ï¸ Can: <span id="can"></span><br>
  âš¡ Enerji: <span id="enerji"></span><br>
  ğŸ’  Odak: <span id="odak"></span><br>
  â³ Hamle: <span id="zaman"></span>
</div>

<div id="olay" class="box" style="display:none">
  <p id="olayMetin"></p>
  <div id="olaySecenek"></div>
</div>

<div id="yetenekler"></div>

<button onclick="dinlen()">ğŸ’¤ Dinlen</button>
<button onclick="anaMenu()">Ana MenÃ¼</button>

<hr>
<div id="log"></div>

</div>

<script>
/* AYARLAR */
let ayarlarData={zorluk:"normal"}

/* EKRAN */
function gizle(){
  ["menu","howto","settings","game"].forEach(i=>{
    document.getElementById(i).style.display="none"
  })
}
function anaMenu(){gizle();menu.style.display="block"}
function nasilOynanir(){gizle();howto.style.display="block"}
function ayarlar(){gizle();settings.style.display="block"}
function oyunaBasla(){gizle();game.style.display="block";basla()}

/* AYAR */
function ayarZorluk(z){
  ayarlarData.zorluk=z
  zorlukYazi.innerText=z
}

/* OYUN */
let can,enerji,odak,zaman,gun,aktifTehdit
let maxCan=10,maxEnerji=6

let kategoriler={
  Fiziksel:["GÃ¼Ã§","HÄ±z","DayanÄ±klÄ±lÄ±k","Ã‡eviklik"],
  Hayatta:["AvcÄ±lÄ±k","Ä°z sÃ¼rme","BarÄ±nak","Ä°lk yardÄ±m"],
  KaranlÄ±k:["GÃ¶lge","Korku direnci","AlgÄ±","Sessizlik"],
  BaÄŸ:["Hayvan","Sezgi","DoÄŸa","Gizli baÄŸ"]
}

let yetenekler={}

function basla(){
  can=10;enerji=6;odak=10;gun=1
  for(let k in kategoriler)
    kategoriler[k].forEach(y=>yetenekler[y]=0)
  yeniGun()
}

function yeniGun(){
  zaman=6
  aktifTehdit=rastgeleTehdit()
  yaz(`ğŸŒ… GÃ¼n ${gun} baÅŸladÄ±`)
  guncelle();butonlar()
}

function rastgeleTehdit(){
  let k=Object.keys(kategoriler)
  return k[Math.floor(Math.random()*k.length)]
}

function guncelle(){
  gunEl("gun",gun)
  gunEl("can",can+"/"+maxCan)
  gunEl("enerji",enerji+"/"+maxEnerji)
  gunEl("odak",odak)
  gunEl("zaman",zaman)
  gunEl("tehdit",aktifTehdit)
}
function gunEl(i,v){document.getElementById(i).innerText=v}

function butonlar(){
  let a=document.getElementById("yetenekler")
  a.innerHTML=""
  for(let k in kategoriler){
    a.innerHTML+=`<h3>${k}</h3>`
    kategoriler[k].forEach(y=>{
      a.innerHTML+=`<button onclick="gelistir('${y}')">${y} (${yetenekler[y]})</button>`
    })
  }
}

function gelistir(y){
  if(enerji<2||odak<=0)return yaz("Yorgunsun.")
  yetenekler[y]++
  enerji-=2;odak--;zaman--
  kontrol()
}

function dinlen(){
  enerji=Math.min(maxEnerji,enerji+3)
  can=Math.min(maxCan,can+1)
  zaman--
  kontrol()
}

function kontrol(){
  guncelle();butonlar()
  if(zaman<=0)gece()
}

/* GECE */
function gece(){
  if(aktifTehdit=="KaranlÄ±k") olayTakip()
  else if(aktifTehdit=="Fiziksel") olayYaratik()
  else standartGece()
}

function standartGece(){
  yaz("Gece sakin geÃ§ti.")
  gun++; yeniGun()
}

/* OLAYLAR */
function olayTakip(){
  olayGoster(
    "KaranlÄ±kta bir ÅŸey seni izliyor.",
    [
      {t:"ğŸ‘ï¸ Saklan",f:()=>sonuc(toplam("KaranlÄ±k"),3,1)},
      {t:"ğŸƒ KaÃ§",f:()=>{enerji-=2;sonuc(toplam("Hayatta"),2,1)}}
    ]
  )
}

function olayYaratik(){
  olayGoster(
    "Bir yaratÄ±k yolunu kesiyor.",
    [
      {t:"ğŸ”ª SavaÅŸ",f:()=>{odak-=2;sonuc(toplam("Fiziksel"),4,2)}},
      {t:"ğŸƒ KaÃ§",f:()=>{enerji-=3;can-=1;bitir("Zorlukla kaÃ§tÄ±n.")}}
    ]
  )
}

/* YARDIMCI */
function olayGoster(m,sec){
  olay.style.display="block"
  olayMetin.innerText=m
  olaySecenek.innerHTML=""
  sec.forEach(s=>{
    let b=document.createElement("button")
    b.innerText=s.t
    b.onclick=s.f
    olaySecenek.appendChild(b)
  })
}

function sonuc(guc,esik,ceza){
  if(guc>=esik) bitir("BaÅŸardÄ±n.")
  else{can-=ceza;bitir("Bedel Ã¶dedin.")}
}

function bitir(m){
  olay.style.display="none"
  yaz(m)
  gun++; yeniGun()
}

function toplam(k){
  let t=0
  kategoriler[k].forEach(y=>t+=yetenekler[y])
  return t
}

function yaz(m){
  log.innerHTML="<p>"+m+"</p>"
}
</script>

</body>
</html>
